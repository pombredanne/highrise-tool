<div style="margin: 0px auto; width: 500px">

<div id="output"></div>

<h2 style="text-align: center">Enter your username and password</h2>
<div class="form-horizontal">
  <div class="control-group">
    <label class="control-label" for="username">Username</label>
    <div class="controls">
      <input type="text" id="username">
    </div>
  </div>
  <div class="control-group">
    <label class="control-label" for="password">Password</label>
    <div class="controls">
      <input type="password" id="password">
    </div>
  </div>
  <div class="control-group">
    <label class="control-label" for="domain">Highrise URL</label>
    <div class="controls">
      <input type="text" id="domain" value="scraperwiki.highrisehq.com">
    </div>
  </div>
  <div class="control-group">
    <div class="controls">
      <button type="submit" class="btn btn-primary" id="import">Import my data!</button>
    </div>
  </div>
</div>


<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet">
<link href="../../custard/shared/style/metro.bootstrap.css" rel="stylesheet">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
<script src="../../custard/shared/js/metro.bootstrap.js"></script>

<script type="text/javascript">
(function() {

  $(function() {
    var apikey, box, user, _ref;
    _ref = [window.user, window.apikey, window.box], user = _ref[0], apikey = _ref[1], box = _ref[2];
    return $('#import').on('click', function() {
      var cmd, hr_domain, hr_pwd, hr_user;
      hr_user = $('#username').val();
      hr_pwd = $('#password').val();
      hr_domain = $('#domain').val();
      cmd = "cd ~/highrise; ./setup  " + hr_user + " " + hr_pwd + " " + hr_domain;
      return $.ajax({
        url: "http://boxecutor-dev-1.scraperwiki.net/" + user + "/" + box + "/exec",
        type: 'POST',
        data: {
          apikey: apikey,
          cmd: cmd
        },
        success: function(text) {
          return $('#output').text(text);
        },
        error: function(jqXHR, textStatus, errorThrown) {
          return console.log(jqXHR.responseText);
        }
      });
    });
  });

}).call(this);
</script>
